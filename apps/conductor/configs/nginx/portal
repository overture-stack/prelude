# Generic Nginx Site Configuration Template
# This template shows the structure - the actual script generates config dynamically
# Replace {SITE_NAME} and {PORT_*} with actual values

# Main site
server {
    listen 80;
    listen [::]:80;
    server_name {SITE_NAME};

    # Frontend application
    location / {
        proxy_pass http://localhost:{FRONTEND_PORT};
        include proxy_params;
    }

    # API endpoints for arranger datasets
    # These paths are expected by the frontend
    location /api/dataset_1_arranger/ {
        proxy_pass http://localhost:{ARRANGER_1_PORT}/;
        include proxy_params;
    }

    # Add more dataset endpoints as needed:
    # location /api/dataset_2_arranger/ {
    #     proxy_pass http://localhost:{ARRANGER_2_PORT}/;
    #     include proxy_params;
    # }
}

# Lyric API service
server {
    listen 80;
    listen [::]:80;
    server_name lyric.{SITE_NAME};

    location / {
        proxy_pass http://localhost:{LYRIC_PORT}/;
        include proxy_params;
    }
}

# Arranger 1 service
server {
    listen 80;
    listen [::]:80;
    server_name arranger_1.{SITE_NAME};

    location / {
        proxy_pass http://localhost:{ARRANGER_1_PORT}/;
        include proxy_params;
    }
}

# Lectern service
server {
    listen 80;
    listen [::]:80;
    server_name lectern.{SITE_NAME};

    location / {
        proxy_pass http://localhost:{LECTERN_PORT}/;
        include proxy_params;
    }
}

# Maestro service
server {
    listen 80;
    listen [::]:80;
    server_name maestro.{SITE_NAME};

    location / {
        proxy_pass http://localhost:{MAESTRO_PORT}/;
        include proxy_params;
    }
}

# Elasticsearch service
server {
    listen 80;
    listen [::]:80;
    server_name es.{SITE_NAME};

    location / {
        proxy_pass http://localhost:{ES_PORT}/;
        include proxy_params;
    }
}