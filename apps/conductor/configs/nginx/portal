server {
    listen 8080;
    listen [::]:8080;
    server_name localhost;

    # Frontend
    location / {
        proxy_pass http://localhost:3000;
        include proxy_params;
    }

    # Specific Arranger dataset endpoints that the frontend expects
    location /api/datatable1_arranger/ {
        proxy_pass http://localhost:5050/;
        include proxy_params;
    }

    location /api/datatable2_arranger/ {
        proxy_pass http://localhost:5051/;
        include proxy_params;
    }

    location /api/molecular_arranger/ {
        proxy_pass http://localhost:5060/;
        include proxy_params;
    }

    # General Arranger APIs (for direct access)
    location /datatable1-api/ {
        proxy_pass http://localhost:5050/;
        include proxy_params;
    }

    location /datatable2-api/ {
        proxy_pass http://localhost:5051/;
        include proxy_params;
    }

    location /molecular-api/ {
        proxy_pass http://localhost:5060/;
        include proxy_params;
    }

    # Additional services
    location /lyric/ {
        proxy_pass http://localhost:3030/;
        include proxy_params;
    }

    # Dictionary registration endpoint
    location /lyric/dictionary/register {
        proxy_pass http://localhost:3030/dictionary/register;
        include proxy_params;
    }

    location /lyric/api-docs/ {
        proxy_pass http://localhost:3030/api-docs/;
        include proxy_params;
    }

    location /lectern/ {
        proxy_pass http://localhost:3031/;
        include proxy_params;
    }

    location /song/ {
        proxy_pass http://localhost:8080/;
        include proxy_params;
    }

    location /score/ {
        proxy_pass http://localhost:8087/;
        include proxy_params;
    }

    location /maestro/ {
        proxy_pass http://localhost:11235/;
        include proxy_params;
    }

    # Elasticsearch endpoint
    location /es/ {
        proxy_pass http://localhost:9200/;
        include proxy_params;
    }

    # Minio object storage
    location /minio/ {
        proxy_pass http://localhost:9000/;
        include proxy_params;
    }
}